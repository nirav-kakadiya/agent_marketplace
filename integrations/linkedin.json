{
  "name": "linkedin",
  "description": "Publish posts to LinkedIn via API (personal profiles and company pages)",
  "code": "async function execute(input, credentials) {\n  const accessToken = credentials.LINKEDIN_ACCESS_TOKEN || '';\n  const personId = credentials.LINKEDIN_PERSON_ID || '';\n  const orgId = credentials.LINKEDIN_ORG_ID || '';\n\n  if (!accessToken) return { success: false, error: 'LINKEDIN_ACCESS_TOKEN not set' };\n\n  const headers = {\n    'Content-Type': 'application/json',\n    'Authorization': `Bearer ${accessToken}`,\n    'X-Restli-Protocol-Version': '2.0.0'\n  };\n\n  const { action } = input;\n\n  if (action === 'publish' || action === 'post') {\n    const text = input.content || input.text || '';\n    if (!text) return { success: false, error: 'No content provided' };\n\n    const author = orgId ? `urn:li:organization:${orgId}` : `urn:li:person:${personId}`;\n    if (!personId && !orgId) return { success: false, error: 'Set LINKEDIN_PERSON_ID or LINKEDIN_ORG_ID' };\n\n    const body = {\n      author,\n      lifecycleState: 'PUBLISHED',\n      specificContent: {\n        'com.linkedin.ugc.ShareContent': {\n          shareCommentary: { text },\n          shareMediaCategory: 'NONE'\n        }\n      },\n      visibility: {\n        'com.linkedin.ugc.MemberNetworkVisibility': 'PUBLIC'\n      }\n    };\n\n    // Add article link if provided\n    if (input.articleUrl) {\n      body.specificContent['com.linkedin.ugc.ShareContent'].shareMediaCategory = 'ARTICLE';\n      body.specificContent['com.linkedin.ugc.ShareContent'].media = [{\n        status: 'READY',\n        originalUrl: input.articleUrl,\n        title: { text: input.title || '' },\n        description: { text: input.summary || '' }\n      }];\n    }\n\n    const res = await fetch('https://api.linkedin.com/v2/ugcPosts', {\n      method: 'POST',\n      headers,\n      body: JSON.stringify(body)\n    });\n\n    const data = await res.json();\n    if (!res.ok) return { success: false, error: data.message || `HTTP ${res.status}` };\n\n    return {\n      success: true,\n      data: {\n        id: data.id,\n        url: `https://www.linkedin.com/feed/update/${data.id}`,\n        author\n      }\n    };\n  }\n\n  if (action === 'profile') {\n    const res = await fetch('https://api.linkedin.com/v2/me', { headers });\n    const data = await res.json();\n    if (!res.ok) return { success: false, error: data.message || `HTTP ${res.status}` };\n    return { success: true, data: { id: data.id, name: `${data.localizedFirstName} ${data.localizedLastName}` } };\n  }\n\n  return { success: false, error: `Unknown action: ${action}` };\n}",
  "requirements": [
    { "name": "LINKEDIN_ACCESS_TOKEN", "description": "LinkedIn OAuth2 Access Token", "type": "api_key", "required": true },
    { "name": "LINKEDIN_PERSON_ID", "description": "LinkedIn Person URN ID (for personal posts)", "type": "credential", "required": false },
    { "name": "LINKEDIN_ORG_ID", "description": "LinkedIn Organization ID (for company page posts)", "type": "credential", "required": false }
  ],
  "createdAt": "2026-02-17T13:00:00Z"
}